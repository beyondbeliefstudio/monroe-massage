---
import Heading from "@/components/Heading.astro";
import WaveDivider from "@/components/WaveDivider.astro";

import type { HTMLAttributes } from "astro/types";
import type { ImageMetadata } from "astro";

export interface HeroProps extends HTMLAttributes<"section"> {
  pageTitle?: string;
  title: string;
  subtitle?: string;
  ariaLabel?: string;
  classes?: string;
  imageSrc?: string | ImageMetadata;
}

const { pageTitle, title, subtitle, ariaLabel, classes, imageSrc, ...rest } = Astro.props;

// Handle both string paths and Astro image imports
const bgImage = typeof imageSrc === "string" ? imageSrc : imageSrc?.src;
---

<section class:list={["hero", classes]} aria-label={ariaLabel} {...rest}>
  {
    bgImage && (
      <div class="hero__bg-wrapper">
        <div class="hero__bg" style={`background-image: url(${bgImage});`} />
        <div class="hero__overlay" />
      </div>
    )
  }
  <div class="container container-md hero__container">
    <div class="column column-main flex-1">
      <div class="content-md hero__content">
        <Heading tag="h1" size="s" fontFamily="secondary" marginBottom="s" weight="fw500"
          >{pageTitle}</Heading
        >
        <Heading tag="h2" size="display" fontFamily="primary" marginBottom="l" weight="fw500"
          >{title}</Heading
        >
        <p class="large">
          {subtitle}
        </p>
        <slot name="btn" class="hero__btn-slot" />
      </div>
    </div>
  </div>
  <WaveDivider fillColor="var(--light-200)" position="bottom" />
</section>

<style lang="scss">
  .hero {
    overflow: hidden;
    position: relative;
    // padding-top: 140px;
    min-height: calc(100vh - 0px);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: -50px;

    &__bg-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
    }

    &__bg {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      opacity: 0.5; // Adjust this value (0 to 1) to control image opacity
      background-attachment: fixed;
    }

    &__overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      background: rgb(26 36 29);
      mix-blend-mode: lighten;
    }

    &__container {
      padding-top: var(--_spacing---section-space--xl);
      padding-bottom: var(--_spacing---section-space--xl);
      position: relative;
      z-index: 3;
    }

    .img-wrapper {
      width: 100%;
      border-radius: var(--border-radius-medium);
      overflow: hidden;
      height: 100%;
      aspect-ratio: 16 / 9;
    }

    .column {
      position: relative;
      z-index: 3;
    }

    &__content {
      // text-align: left;

      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      p {
        color: var(--light-200);
      }
    }

    &__title {
      width: fit-content;
      margin-left: auto;
      /* text-transform: uppercase; */
      letter-spacing: 0px;
      padding: 0.5rem;
      border-radius: 5px;
      margin-right: auto;
    }

    &__btn-group {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
    }
  }
</style>
